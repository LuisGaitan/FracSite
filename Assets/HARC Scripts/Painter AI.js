#pragma strict
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    //~SD
//----------------------//
//---define variables---//
//----------------------//
var distance:Number=1;//distance of player to AI
var time:Number=3;//time elapsed before second animation plays
var player:Transform;//player to watch
var sound:AudioSource;//the audio file for speaking
var text:String="This is the text that will be displayed";
var waitForNextLetter:Number=0;//the minimum amount of time to wait before writing the next letter
var style:GUIStyle;//The GUI Style for the text
private var startTime:Number=0;//when it started counting
private var originalRotation:Vector3=Vector3(0,-96,0);//original rotation of the guy
private var scrollPos:int=0;//current position on scrolling in the text
private var lastLetter:Number=0;//time the last letter was drawn

private var annex : boolean = false;

//----------------------//
//---define functions---//
//----------------------//

//when the script is fired
function Start()
{
	startTime=0;
	transform.localEulerAngles=originalRotation;
	animation.Play("Paint");
}

//updates every frame
function Update() 
{
	if((player.position-transform.position).magnitude<=distance)
	{
		if(startTime==0){startTime=Time.time;}
		if((Time.time-startTime)>=time)
		{
			startTime=-time;
			animation.Stop("Paint");
			transform.LookAt(player);
			transform.localEulerAngles=Vector3(originalRotation.x,transform.localEulerAngles.y,transform.localEulerAngles.z);
			annex = true;
			if(!sound.isPlaying)
				sound.Play();
		}
		if (annex)
		{
			animation.Play("Wave");
		}
	}
	else
	{
		scrollPos=0;
		sound.Stop();
		startTime=0;
		transform.localEulerAngles=originalRotation;
		animation.Play("Paint");
		annex=false;
	}
}

//function OnGUI()
//{
	//if(annex)
	//{
		//if((Time.time-lastLetter)>=waitForNextLetter)
		//{
			//scrollPos=scrollPos<text.Length?++scrollPos:text.Length;
			//lastLetter=Time.time;
		//}
		//GUI.Label(Rect(Screen.width*0.1,Screen.height-220,Screen.width*0.8,200),text.Substring(0,scrollPos),style);
	//}
//}
